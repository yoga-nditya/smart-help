services:
  api:
    build:
      context: .
      dockerfile: Dockerfile.dev
    ports:
      - "8000:8000"
    volumes:
      - .:/app
    command: >
      python -m uvicorn main:app
      --host 0.0.0.0
      --port 8000
      --reload

  api-ssl:
    build: .
    container_name: fastapi-ssl
    ports:
      - "443:443"
    volumes:
      - .:/app
      - ./ssl:/app/ssl:ro
    command: >
      python -m uvicorn main:app
      --host 0.0.0.0
      --port 443
      --ssl-keyfile ssl/private.key
      --ssl-certfile ssl/cert.pem
      --reload
    profiles: ["ssl"]
